[{"path":"https://satvilab.github.io/UtilsCompassSV/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 Miguel Julio Rodo Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started with UtilsCompassSV","text":"UtilsCompassSV provides utility functions plotting working COMPASS (Combinatorial Polyfunctionality Analysis Single Cells) output. primary function plot_compass, creates concise visualizations posterior probabilities cytokine combinations.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"available-data","dir":"Articles","previous_headings":"","what":"Available Data","title":"Getting Started with UtilsCompassSV","text":"package includes sample COMPASS result objects demonstration: c_obj: single COMPASSResult object c_obj_list: named list COMPASSResult objects","code":"data(\"c_obj\", package = \"UtilsCompassSV\") data(\"c_obj_list\", package = \"UtilsCompassSV\")"},{"path":[]},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"plot_compass","dir":"Articles","previous_headings":"Main Functions","what":"plot_compass","title":"Getting Started with UtilsCompassSV","text":"plot_compass function creates visualizations COMPASS posterior probabilities boxplots, optional PFS (Polyfunctionality Score) plots. plot saved working directory PNG file (default, save = TRUE save_format = \"png\"). Key parameters: c_obj: COMPASSResult object list objects type: plot - \"pp\" posterior probabilities, \"scores\" PFS/FS scores prob_min, quant_min: Filter cytokine combinations minimum probability threshold save_format: Output format (\"png\" \"pdf\")","code":"# Basic usage with a list of COMPASS objects plot_compass(   c_obj = c_obj_list,   type = c(\"pp\", \"scores\"),   return_plot_list = FALSE,   shift_plot_scores = c(-0.05, 0.05),   shift_plot_pp_y = -0.075,   shift_plot_heatmap_x = 0.052 )"},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"convert_cyt_combn_format","dir":"Articles","previous_headings":"Main Functions","what":"convert_cyt_combn_format","title":"Getting Started with UtilsCompassSV","text":"Convert cytokine combination notation COMPASS format standard +/- format: Format descriptions: Standard format: IFNg+IL2-TNF+ (+ positive, - negative) COMPASS format: IFNg&!IL2&TNF (& separator, ! negation)","code":"# Convert from COMPASS format to standard format convert_cyt_combn_format(c(\"IFNg&!IL2&TNF\"), to = \"std\") #> [1] \"IFNg+IL2-TNF+\"  # Convert from standard format to COMPASS format convert_cyt_combn_format(c(\"IFNg+IL2-TNF+\"), to = \"compass\") #> [1] \"IFNg&!IL2&TNF\""},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"response_prob","dir":"Articles","previous_headings":"Main Functions","what":"response_prob","title":"Getting Started with UtilsCompassSV","text":"Calculate overall probability responding least one cytokine combination:","code":"# Calculate response probability response_prob(c_obj = c_obj) #> # A tibble: 148 × 2 #>    sampleid     prob #>    <chr>       <dbl> #>  1 010673_D0   1     #>  2 010782_D0   1     #>  3 010782_D720 1     #>  4 010978_D0   1     #>  5 010993_D0   1     #>  6 020185_D0   1     #>  7 030442_D0   1     #>  8 030448_D0   1     #>  9 030545_D0   1     #> 10 030697_D0   0.521 #> # ℹ 138 more rows  # Exclude specific cytokine combinations response_prob(   c_obj = c_obj,   exc = c(\"IFNg&IL2&TNF&!IL17&!IL6&!IL22\") ) #> # A tibble: 148 × 2 #>    sampleid     prob #>    <chr>       <dbl> #>  1 010673_D0   1     #>  2 010782_D0   0.992 #>  3 010782_D720 0.997 #>  4 010978_D0   1     #>  5 010993_D0   1     #>  6 020185_D0   0.998 #>  7 030442_D0   1     #>  8 030448_D0   1     #>  9 030545_D0   0.911 #> 10 030697_D0   0.521 #> # ℹ 138 more rows"},{"path":[]},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"using-greek-symbols-for-cytokines","dir":"Articles","previous_headings":"Customizing Plots","what":"Using Greek Symbols for Cytokines","title":"Getting Started with UtilsCompassSV","text":"can customize cytokine labels use Greek symbols:","code":"get_cyt_lab <- function(cyt) {   lapply(cyt, function(cyt_ind) {     switch(cyt_ind,       \"IFNg\" = bquote(\"IFN\" ~ gamma),       cyt_ind     )   }) }  plot_compass(   c_obj_list[1],   type = \"pp\",   cyt_lab = get_cyt_lab )"},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"saving-options","dir":"Articles","previous_headings":"Customizing Plots","what":"Saving Options","title":"Getting Started with UtilsCompassSV","text":"Control plots saved:","code":"plot_compass(   c_obj = c_obj_list,   save = TRUE,   save_format = \"pdf\",   save_grid = TRUE,   save_ind = FALSE,   dir_save = tempdir(),   file_grid = \"my_compass_plot\" )"},{"path":"https://satvilab.github.io/UtilsCompassSV/articles/getting-started.html","id":"further-information","dir":"Articles","previous_headings":"","what":"Further Information","title":"Getting Started with UtilsCompassSV","text":"details individual functions, see help pages: ?plot_compass ?convert_cyt_combn_format ?response_prob","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Miguel Julio Rodo. Author, maintainer.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Rodo MJ (2025). UtilsCompassSV: Utility Functions Plot Work COMPASS Output. R package version 0.1.7.","code":"@Manual{,   title = {UtilsCompassSV: Utility Functions to Plot and Work with COMPASS Output},   author = {Miguel Julio Rodo},   year = {2025},   note = {R package version 0.1.7}, }"},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":null,"dir":"","previous_headings":"","what":"UtilsCompassSV - Copilot Instructions","title":"UtilsCompassSV - Copilot Instructions","text":"R package provides utility functions plotting working COMPASS (Combinatorial Polyfunctionality Analysis Single Cells) output. primary function plot_compass, creates concise visualizations posterior probabilities cytokine combinations.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"repository-structure","dir":"","previous_headings":"","what":"Repository Structure","title":"UtilsCompassSV - Copilot Instructions","text":"Main functions: plot_compass.R, convert_cyt_combn_format.R, response_prob.R Helper functions: plot_compass-save_layout.R, plot-compass-plot_compass_sub.R, get_col_vec_grp.R Utilities: utils-pipe.R Tests follow naming convention test-<function_name>.R man/: Auto-generated documentation (edit manually) data/: Package data objects data-raw/: Scripts creating test example data DESCRIPTION: Package metadata dependencies NAMESPACE: Auto-generated package namespace (edit manually) .github/workflows/: CI/CD workflows","code":""},{"path":[]},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"setup","dir":"","previous_headings":"Development Workflow","what":"Setup","title":"UtilsCompassSV - Copilot Instructions","text":"Dependencies managed DESCRIPTION file. .github/workflows/copilot-setup-steps.yml workflow pre-installs dependencies Copilot’s ephemeral environment.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"building-and-testing","dir":"","previous_headings":"Development Workflow","what":"Building and Testing","title":"UtilsCompassSV - Copilot Instructions","text":"","code":"# Install dependencies (if needed manually) install.packages(\"devtools\") devtools::install_deps(dependencies = TRUE)  # Load the package for development devtools::load_all()  # Run tests devtools::test()  # Check package (equivalent to R CMD check) devtools::check()  # Build documentation devtools::document()"},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"cicd","dir":"","previous_headings":"Development Workflow","what":"CI/CD","title":"UtilsCompassSV - Copilot Instructions","text":"package uses R-CMD-check workflow runs push/PR main/master branches Tests run multiple OS (macOS, Windows, Ubuntu) R versions (devel, release, oldrel-1) commits must pass R CMD check merging pkgdown.yaml workflow builds deploys package website GitHub Pages","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"pkgdown-website","dir":"","previous_headings":"Development Workflow","what":"pkgdown Website","title":"UtilsCompassSV - Copilot Instructions","text":"package uses pkgdown documentation website https://satvilab.github.io/UtilsCompassSV/","code":"# Build the pkgdown site locally pkgdown::build_site()  # Preview the site pkgdown::preview_site()"},{"path":[]},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"r-package-conventions","dir":"","previous_headings":"Code Standards","what":"R Package Conventions","title":"UtilsCompassSV - Copilot Instructions","text":"Documentation: exported functions must roxygen2 documentation Use #' roxygen comments Include @title, @description, @param, @return, @export, @examples Run devtools::document() update man/ files NAMESPACE Function Naming: Use snake_case function names (e.g., plot_compass, response_prob) Dependencies: Use :: notation call functions packages (e.g., purrr::map()) Add new dependencies DESCRIPTION Imports: (Suggests: test-dependencies) Avoid adding unnecessary dependencies Code Style: Follow tidyverse style guide Use explicit returns return() function logic complex Use pipe operator %>% (imported via magrittr) data transformation chains Testing: Write tests exported functions Use testthat 3rd edition (testthat (>= 3.0.0)) Test files named test-<function_name>.R Use descriptive test names: test_that(\"function_name expected behavior\", { ... }) Tests self-contained clean temporary files created","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"package-specific-guidelines","dir":"","previous_headings":"Code Standards","what":"Package-Specific Guidelines","title":"UtilsCompassSV - Copilot Instructions","text":"Maintain compatibility COMPASS::COMPASSResult class Handle single COMPASSResult objects lists objects Use ggplot2 visualizations Support saving plots PNG PDF formats Provide sensible defaults allow customization Handle edge cases (empty data, missing combinations, etc.) Standard format: IFNg+IL2-TNF+ (+ positive, - negative) COMPASS format: IFNg&!IL2&TNF (& separator, ! negation) Maintain consistent cytokine ordering across visualizations Use tidyverse packages (purrr, tibble, tidyr, stringr) data manipulation Handle missing malformed data gracefully informative error messages","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"important-notes","dir":"","previous_headings":"","what":"Important Notes","title":"UtilsCompassSV - Copilot Instructions","text":"manually edit man/ directory files - auto-generated roxygen2 manually edit NAMESPACE - ’s auto-generated roxygen2 commit files listed .Rbuildignore (like README.Rmd, data-raw/*, .Rproj files) package uses lazy data loading (LazyData: true), data objects loaded demand Minimum R version requirement: R >= 2.10 RoxygenNote version: 7.1.2","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"pkgdown-reference-maintenance","dir":"","previous_headings":"","what":"pkgdown Reference Maintenance","title":"UtilsCompassSV - Copilot Instructions","text":"CRITICAL: adding, removing, modifying exported functions data objects, pkgdown reference section _pkgdown.yml MUST updated reflect changes.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"when-to-update-_pkgdownyml","dir":"","previous_headings":"pkgdown Reference Maintenance","what":"When to Update _pkgdown.yml","title":"UtilsCompassSV - Copilot Instructions","text":"Adding new exported function: Add function name appropriate section reference: block Removing exported function: Remove function name reference: block Changing function exports: function newly exported unexported via @export, update accordingly Adding new data objects: Add data object name “Data” section Reorganizing function categories: Update section titles contents needed","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"structure-of-_pkgdownyml-reference-section","dir":"","previous_headings":"pkgdown Reference Maintenance","what":"Structure of _pkgdown.yml Reference Section","title":"UtilsCompassSV - Copilot Instructions","text":"","code":"reference: - title: Main Functions   desc: Primary functions for working with COMPASS output   contents:   - function_name_1   - function_name_2  - title: Helper Functions   desc: Supporting functions   contents:   - helper_function_1  - title: Data   desc: Sample data objects   contents:   - data_object_1"},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"verification-steps","dir":"","previous_headings":"pkgdown Reference Maintenance","what":"Verification Steps","title":"UtilsCompassSV - Copilot Instructions","text":"making changes exports: 1. Run devtools::document() update NAMESPACE 2. Update _pkgdown.yml reference section needed 3. Run pkgdown::build_site() locally verify site builds correctly 4. Check exported functions appear reference section","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"testing-best-practices","dir":"","previous_headings":"","what":"Testing Best Practices","title":"UtilsCompassSV - Copilot Instructions","text":"Test files use temporary directories (tempdir()) file operations Clean test artifacts tests complete Use data(\"dataset_name\", package = \"UtilsCompassSV\") load package data tests Test success cases expected failures/edge cases Use expect_* functions testthat appropriately","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/copilot-instructions.html","id":"version-management","dir":"","previous_headings":"","what":"Version Management","title":"UtilsCompassSV - Copilot Instructions","text":"Version stored DESCRIPTION file Follow semantic versioning incrementing versions Update NEWS.md (exists) making user-facing changes","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/index.html","id":"utilscompasssv","dir":"","previous_headings":"","what":"Utility Functions to Plot and Work with COMPASS Output","title":"Utility Functions to Plot and Work with COMPASS Output","text":"goal UtilsCompassSV supply useful plotting utility functions working output COMPASS.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Utility Functions to Plot and Work with COMPASS Output","text":"can install latest version UtilsCompassSV GitHub ","code":"if (!require(\"remotes\", quietly = TRUE)) install.packages(\"remotes\") remotes::install_github(\"SATVILab/UtilsCompassSV\")"},{"path":[]},{"path":"https://satvilab.github.io/UtilsCompassSV/index.html","id":"plots","dir":"","previous_headings":"Example","what":"Plots","title":"Utility Functions to Plot and Work with COMPASS Output","text":"Create boxplots posterior probabilities individual cytokine combinations, well PFS FS responses. concise standard COMPASS heatmaps automatically force cytokine combinations present cytokines order “groups” plotted together. Note PFS FS scores plot need added.  Colours boxplots tiles cytokine grid plot can customized.","code":"library(UtilsCompassSV) data('c_obj_list', package = 'UtilsCompassSV') plot_compass(   c_obj = c_obj_list,   dir_save = here::here('data-raw'),   type = c('pp', 'scores'),   return_plot_list = FALSE,   shift_plot_scores = c(-0.05, 0.05),   shift_plot_pp_y = -0.075,   shift_plot_heatmap_x = 0.052   ) knitr::include_graphics('data-raw/compass_boxplots_grid.png') plot_compass(   c_obj = c_obj_list,   dir_save = here::here('data-raw'),   file_grid = \"compass_boxplots_grid_custom_colours\",   type = c('pp', 'scores'),   return_plot_list = FALSE,   shift_plot_scores = c(-0.05, 0.05),   shift_plot_pp_y = -0.075,   shift_plot_heatmap_x = 0.034,   plot_prob_fill = c(\"skyblue\", \"forestgreen\", \"mediumvioletred\", \"darkorange\"),   tile_fill = RColorBrewer::brewer.pal(n = 11, name = \"Spectral\")[2:4] |> rev() ) knitr::include_graphics('data-raw/compass_boxplots_grid_custom_colours.png')"},{"path":"https://satvilab.github.io/UtilsCompassSV/index.html","id":"utilities","dir":"","previous_headings":"Example","what":"Utilities","title":"Utility Functions to Plot and Work with COMPASS Output","text":"Convert cytokine combination formats standard “+/-” format COMPASS “!&” format. Can also label cytokines/markers. Calculate probability individual responding least one cytokine combination, assuming independence probability estimates cytokine combinations.","code":"cyt_combn_vec_compass <- c(\"IFNg&!IL2&TNF&IL6&!IL22\",                            \"IFNg&IL2&TNF&IL6&IL22\",                            \"!IFNg&!IL2&!TNF&!IL6&!IL22\") cyt_combn_vec_std <- UtilsCompassSV::convert_cyt_combn_format(cyt_combn_vec_compass,                                                             to = 'std') pander::pandoc.table(tibble::tibble(   `COMPASS format` = cyt_combn_vec_compass,   `Standard format` = cyt_combn_vec_std   )) response_prob(c_obj = c_obj_list[[4]]) %>%   head() %>%   pander::pandoc.table()"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Example COMPASS result object — c_obj","title":"Example COMPASS result object — c_obj","text":"COMPASSResult object containing example data testing demonstration purposes.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example COMPASS result object — c_obj","text":"","code":"c_obj"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example COMPASS result object — c_obj","text":"COMPASSResult object following structure: fit Fitted model results COMPASS analysis data Input data used COMPASS analysis","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Example COMPASS result object — c_obj","text":"","code":"data(\"c_obj\", package = \"UtilsCompassSV\") class(c_obj) #> [1] \"COMPASSResult\""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Example list of COMPASS result objects — c_obj_list","title":"Example list of COMPASS result objects — c_obj_list","text":"named list COMPASSResult objects containing example data testing demonstration purposes. element represents results different stimulation conditions.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example list of COMPASS result objects — c_obj_list","text":"","code":"c_obj_list"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj_list.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example list of COMPASS result objects — c_obj_list","text":"list 4 elements, COMPASSResult object: Live Mtb Results live Mycobacterium tuberculosis stimulation Secreted Mtb proteins Results secreted Mtb protein stimulation Non-secreted Mtb proteins Results non-secreted Mtb protein stimulation EBV/CMV Results EBV/CMV stimulation","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/c_obj_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Example list of COMPASS result objects — c_obj_list","text":"","code":"data(\"c_obj_list\", package = \"UtilsCompassSV\") names(c_obj_list) #> [1] \"Live Mtb\"                  \"Secreted Mtb proteins\"     #> [3] \"Non-secreted Mtb proteins\" \"EBV/CMV\""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/convert_cyt_combn_format.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert cytokine combination format to or from COMPASS format — convert_cyt_combn_format","title":"Convert cytokine combination format to or from COMPASS format — convert_cyt_combn_format","text":"Convert cytokine combination format COMPASS format \"standard \" +/- format. See cyt_combn parameter details. NOTE: present converts COMPASS standard format.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/convert_cyt_combn_format.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert cytokine combination format to or from COMPASS format — convert_cyt_combn_format","text":"","code":"convert_cyt_combn_format(   cyt_combn,   to,   force = FALSE,   silent = FALSE,   check = TRUE,   lab = NULL )"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/convert_cyt_combn_format.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert cytokine combination format to or from COMPASS format — convert_cyt_combn_format","text":"cyt_combn character vector. Cytokine combination, specified either \"<cyt><+-><cyt><+-><cyt><+->...\" (e.g. IFNg+IL2-TNF+) COMPASS \"<!><cyt>&<!><cyt>&<!><cyt>...\" (e.g. IFNg&!IL2&TNF) format. 'compass' 'std'. Format convert . 'compass', output format COMPASS format (specified ). 'std', output format standard format (specified ). force logical. TRUE, code convert specified format run. FALSE, checks made ensure conversion done already requested format. Default FALSE. silent logical. FALSE, warnings printed force == FALSE detected cyt_combn already appears requested format. Default FALSE. check logical. TRUE, converted format checked element number cytokines. Note check performed conversion attempted. Default TRUE. lab named character vector. Names names markers/channels found cytokine combination, elements corresponding names/channels. NULL, labelling done. Default NULL.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/convert_cyt_combn_format.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert cytokine combination format to or from COMPASS format — convert_cyt_combn_format","text":"character vector.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/convert_cyt_combn_format.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert cytokine combination format to or from COMPASS format — convert_cyt_combn_format","text":"","code":"convert_cyt_combn_format(c(\"IFNg&!IL2\"), to = \"std\") #> [1] \"IFNg+IL2-\" convert_cyt_combn_format(c(\"IFNg+IL2-\"), to = \"compass\") #> [1] \"IFNg&!IL2\""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-get_col_vec_grp.html","id":null,"dir":"Reference","previous_headings":"","what":"Get colours for groups for boxplots — .get_col_vec_grp","title":"Get colours for groups for boxplots — .get_col_vec_grp","text":"Get colours groups boxplots","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-get_col_vec_grp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get colours for groups for boxplots — .get_col_vec_grp","text":"","code":".get_col_vec_grp(plot_prob_fill = NULL, .grp = NULL)"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-get_col_vec_grp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get colours for groups for boxplots — .get_col_vec_grp","text":"plot_prob_fill character. colour, boxplots filled according specified value. named vector colours names correspond names bottom-level c_obj lists, boxplots filled accordingly.  Otherwise, boxplots filled according names lower-list using .grp character vector. Names groups COMPASS object.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-get_col_vec_grp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get colours for groups for boxplots — .get_col_vec_grp","text":"named character vector, names names groups elements colours groups","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-get_col_vec_grp_null.html","id":null,"dir":"Reference","previous_headings":"","what":"Get colour vector for groups if plot_prob_fill is NULL — .get_col_vec_grp_null","title":"Get colour vector for groups if plot_prob_fill is NULL — .get_col_vec_grp_null","text":"Get colour vector groups plot_prob_fill NULL","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-get_col_vec_grp_null.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get colour vector for groups if plot_prob_fill is NULL — .get_col_vec_grp_null","text":"","code":".get_col_vec_grp_null(.grp)"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_pp.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot COMPASS posterior probabilites — .plot_compass_pp","title":"Plot COMPASS posterior probabilites — .plot_compass_pp","text":"Plot COMPASS posterior probabilites","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_pp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot COMPASS posterior probabilites — .plot_compass_pp","text":"","code":".plot_compass_pp(   c_obj,   dir_save,   prob_min,   quant_min,   silent,   cyt_order,   plot_prob_fill,   facet,   cyt_lab,   boxplot_width,   font_size,   line_width,   tile_colour,   tile_alpha,   tile_fill )"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_pp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot COMPASS posterior probabilites — .plot_compass_pp","text":"c_obj named list COMPASSResult objects. Provides data plot. dir_save character. save output. Default working directory. prob_min, quant_min [0,1]. Specify minimum probability response minimum quantile samples cytokine combination must included. example, prob_min == 0.5 quant_min == 0.1, cytokine combinations least 10 Default 0.8 0.25. silent logical. TRUE, warnings otherwise given . Default FALSE. cyt_order character. NULL, order cytokines arranged vertically along annotation grid given vector (first element going bottom). NULL, cytokines ordered order COMPASS output. Default NULL. plot_prob_fill character. colour, boxplots filled according specified value. named vector colours names correspond names bottom-level c_obj lists, boxplots filled accordingly.  Otherwise, boxplots filled according names lower-list using facet logical vector. Whether facet save individual plots group c_obj. TRUE , faceted version saved. FALSE , plots saved individually. c(TRUE, FALSE), facted individual plots saved. cyt_lab function. function takes cytokine names input returns value desired plotted al   ong y-axis grid plot. NULL, supplied creating grid plot scale_y_continuous function via labels parameter. example, two cytokines, \"IFNg\" \"TNF\", want display \"IFNg\" Greek gamma symbol, can set cyt_lab equal following: cyt_lab = function(cyt) purrr::map(cyt, function(cyt_ind){switch(cyt_ind, \"IFNg\" = bquote(paste(plain(paste(\"IFN\")), gamma)), cyt_ind)}). change label \"IFNg\" leave others . boxplot_width numeric. Width parameter geom_boxplot. font_size numeric. Base font size plots. line_width numeric. Width lines plots. tile_colour character. Colour use tiles cytokine grid plot. NULL, colour used. Default NULL. tile_alpha numeric [0,1]. Transparency level use tiles cytokine grid plot. Default 1 (transparency, .e. fully opaque). tile_fill character vector. Fill colours use tiles cytokine grid plot. Corresponds number cytokines expressed combination. Earlier elements vector used cytokine combinations fewer cytokines expressed. NULL, number columns automatically determined. Default NULL.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_pp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot COMPASS posterior probabilites — .plot_compass_pp","text":"named list names 'p_probs' 'p_grid', corresponding list ggplot2 plots posterior plots heat map corresponding cytokine combination labels, respectively.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_scores.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot COMPASS PFS and FS scores — .plot_compass_scores","title":"Plot COMPASS PFS and FS scores — .plot_compass_scores","text":"Plot COMPASS PFS FS scores","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_scores.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot COMPASS PFS and FS scores — .plot_compass_scores","text":"","code":".plot_compass_scores(   c_obj,   plot_prob_fill,   boxplot_width,   plot_scores_lims_y,   font_size,   line_width = 0.5 )"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_scores.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot COMPASS PFS and FS scores — .plot_compass_scores","text":"c_obj named list COMPASSResult objects. Provides data plot. plot_prob_fill character. colour, boxplots filled according specified value. named vector colours names correspond names bottom-level c_obj lists, boxplots filled accordingly.  Otherwise, boxplots filled according names lower-list using boxplot_width numeric. Width parameter geom_boxplot. plot_scores_lims_y numeric vector length 2. NULL, specifies y-axis range scores plots. Default NULL. font_size numeric. Base font size plots. line_width numeric. Width lines plots.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-plot_compass_scores.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot COMPASS PFS and FS scores — .plot_compass_scores","text":"named list names set names c_obj, element corresponding boxplot PFS FS scores.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-save_layout.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a layout based on post probs, cyt heat map and scores — .save_layout","title":"Create a layout based on post probs, cyt heat map and scores — .save_layout","text":"Create layout based post probs, cyt heat map scores","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-save_layout.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a layout based on post probs, cyt heat map and scores — .save_layout","text":"","code":".save_layout(   ind,   p_list_pp,   p_list_scores = NULL,   prop_pp,   shift_plot_heatmap_x,   shift_plot_scores_y,   shift_plot_pp_y,   height,   width,   dir_save,   file,   save_format,   label,   n_col,   shift_label,   font_size_labels )"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/dot-save_layout.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a layout based on post probs, cyt heat map and scores — .save_layout","text":"ind logical. TRUE, sets posterior probability PFS plots saved individually. p_list_pp list ggplot2 objects. Posterior probability plots associated cytokine-label grids, returned UtilsCompassSV:::.plot_compass_pp. p_list_scores list ggplot2 objects. PFS FS response plots, returned UtilsCompassSV:::.plot_compass_scores. prop_pp numeric vector, values [0,1]. Specifies coordinate-wise proportion plot region single group c_obj (c_obj list; otherwise simply proportion plot) devoted (applying shift_plot_pp_y) plot posterior probabilities. first element proportion allocated probability plot along x-axis, (1-prop_pp[1]) space allocated scores plot. first element set equal 0 scores plot. second element proportion allocate probabilty plot along y-axis, (1-prop_pp[1]) space allocated cytokine indicator grid. shift_plot_heatmap_x [0,1]. Extent shift prob_plot. Increasing 0 moves start probability plot right. Maximum value 1 (point plot effectively pushed plotting surface). Useful increase value 0.01 cytokine names long push labelling grid far right. Tweak required. Default 0. shift_plot_scores_y numeric vector length two, restricted [-1,1]. Specifies amount squeeze scores plot . first element controls bottom position plot, second top. elements, positive value means moving upwards. value zero corresponds shift. Typically bottom element top element shifted (therefore negative values). applies type includes \"pp\" \"scores\". Default c(0,0). shift_plot_pp_y [0,1]. Specifies amount shift upper point probability plot upwards. Positive values make larger. Typically want shift , anything, use negative values. Default 0. height, width numeric. Height width saved plot(s). dir_save character. save output. Default working directory. file character. File name saved plot. save_format \"pdf\" \"png\". Plot device use. Default \"png\". label logical. TRUE c_obj list, names elements c_obj used labels sub-figures. c_obj list, label printed, regardless value label. Default TRUE. n_col integer. Number columns grid layout. shift_label numeric vector, values [0,1]. Specifies amount shift labels plot (used). Default c(0.05, -0.04). font_size_labels numeric. Font size plot labels.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/plot_compass.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot COMPASS output — plot_compass","title":"Plot COMPASS output — plot_compass","text":"Plot COMPASS posterior probabilities boxplots, PFS scores desired. grid figures created whenever multiple COMPASS objects plotted simultaneous, y-axis scales cytokine combinations displayed fixed across plots.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/plot_compass.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot COMPASS output — plot_compass","text":"","code":"plot_compass(   c_obj,   dir_save = getwd(),   type = c(\"pp\", \"scores\"),   save = TRUE,   save_format = \"png\",   prob_min = 0.8,   quant_min = 0.25,   boxplot_width_scores = NULL,   boxplot_width_pp = NULL,   silent = FALSE,   cyt_order = NULL,   file_grid = NULL,   file_ind = NULL,   plot_prob_fill = NULL,   shift_plot_heatmap_x = 0,   shift_plot_scores_y = c(0, 0),   shift_plot_pp_y = 0,   shift_label = c(0.05, -0.04),   prop_pp = c(0.7, 0.7),   label = TRUE,   return_plot_list = TRUE,   facet = FALSE,   n_col = NULL,   cyt_lab = NULL,   save_grid = TRUE,   height_grid = NULL,   width_grid = NULL,   save_ind = FALSE,   font_size = 14,   line_width = 0.5,   height_ind = NULL,   width_ind = NULL,   plot_scores_lims_y = NULL,   font_size_labels = 14,   tile_colour = NULL,   tile_alpha = 1,   tile_fill = NULL )"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/plot_compass.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot COMPASS output — plot_compass","text":"c_obj object class \"COMPASSResult\", list objects. Provides COMPASS data plot. dir_save character. save output. Default working directory. type \"pp\" /\"scores\". Specifies response type(s) plot. \"pp\" included, posterior probabilities individual cytokine combinations plotted. \"scores\" included, PFS FS responses included. Note , stage, \"pp\" needs included, added even missing type. Default c(\"pp\", \"scores\"). save logical. TRUE, plots saved. Default TRUE. save_format \"pdf\" \"png\". Plot device use. Default \"png\". prob_min, quant_min [0,1]. Specify minimum probability response minimum quantile samples cytokine combination must included. example, prob_min == 0.5 quant_min == 0.1, cytokine combinations least 10 Default 0.8 0.25. boxplot_width_pp, boxplot_width_scores numeric. NULL, supplied width parameter geom_boxplot posterior probability scores plots, respectively. Purpose force widths boxplots constant across elements c_obj. Default NULL. silent logical. TRUE, warnings otherwise given . Default FALSE. cyt_order character. NULL, order cytokines arranged vertically along annotation grid given vector (first element going bottom). NULL, cytokines ordered order COMPASS output. Default NULL. file_grid, file_ind character (vector). Names grid plot individual plots, respectively, saved . .null(file_grid), grid plot simply named compass_boxplots_grid. .null(file_ind), element name taken corresponding list name c_obj. file_ind named, names c_obj used map onto elements file_ind. plot_prob_fill character. colour, boxplots filled according specified value. named vector colours names correspond names bottom-level c_obj lists, boxplots filled accordingly.  Otherwise, boxplots filled according names lower-list using shift_plot_heatmap_x [0,1]. Extent shift prob_plot. Increasing 0 moves start probability plot right. Maximum value 1 (point plot effectively pushed plotting surface). Useful increase value 0.01 cytokine names long push labelling grid far right. Tweak required. Default 0. shift_plot_scores_y numeric vector length two, restricted [-1,1]. Specifies amount squeeze scores plot . first element controls bottom position plot, second top. elements, positive value means moving upwards. value zero corresponds shift. Typically bottom element top element shifted (therefore negative values). applies type includes \"pp\" \"scores\". Default c(0,0). shift_plot_pp_y [0,1]. Specifies amount shift upper point probability plot upwards. Positive values make larger. Typically want shift , anything, use negative values. Default 0. shift_label numeric vector, values [0,1]. Specifies amount shift labels plot (used). Default c(0.05, -0.04). prop_pp numeric vector, values [0,1]. Specifies coordinate-wise proportion plot region single group c_obj (c_obj list; otherwise simply proportion plot) devoted (applying shift_plot_pp_y) plot posterior probabilities. first element proportion allocated probability plot along x-axis, (1-prop_pp[1]) space allocated scores plot. first element set equal 0 scores plot. second element proportion allocate probabilty plot along y-axis, (1-prop_pp[1]) space allocated cytokine indicator grid. label logical. TRUE c_obj list, names elements c_obj used labels sub-figures. c_obj list, label printed, regardless value label. Default TRUE. return_plot_list logical. TRUE, named list plots used create figure returned. first element \"p_grid\" cytokine grid plot. second element \"p_probs\"  list posterior probability plots. third element named \"p_scores\", sub-elements plots PFS FS responses group. \"p_scores\" element supplied \"scores\" \"type\". facet logical vector. Whether facet save individual plots group c_obj. TRUE , faceted version saved. FALSE , plots saved individually. c(TRUE, FALSE), facted individual plots saved. n_col integer. Number columns grid plot facet = TRUE. cyt_lab function. function takes cytokine names input returns value desired plotted al   ong y-axis grid plot. NULL, supplied creating grid plot scale_y_continuous function via labels parameter. example, two cytokines, \"IFNg\" \"TNF\", want display \"IFNg\" Greek gamma symbol, can set cyt_lab equal following: cyt_lab = function(cyt) purrr::map(cyt, function(cyt_ind){switch(cyt_ind, \"IFNg\" = bquote(paste(plain(paste(\"IFN\")), gamma)), cyt_ind)}). change label \"IFNg\" leave others . save_grid logical. TRUE, grid individual elements c_obj saved. Default TRUE. height_grid, width_grid numeric. Height width, respectively, centimetres saved figure (saved). NULL, appropriate values guessed used. Default NULL. save_ind logical. TRUE, plots individual elements c_obj saved. Default FALSE. font_size numeric. Base font size plots. Default 14. line_width numeric. Width lines plots. Default 0.5. height_ind, width_ind numeric. Height width, respectively, centimetres saved figure (saved), saving individual elements c_obj. NULL, appropriate values guessed used. Default NULL. plot_scores_lims_y numeric vector length 2. NULL, specifies y-axis range scores plots. Default NULL. font_size_labels numeric. Font size plot labels. Default 14. tile_colour character. Colour use tiles cytokine grid plot. NULL, colour used. Default NULL. tile_alpha numeric [0,1]. Transparency level use tiles cytokine grid plot. Default 1 (transparency, .e. fully opaque). tile_fill character vector. Fill colours use tiles cytokine grid plot. Corresponds number cytokines expressed combination. Earlier elements vector used cytokine combinations fewer cytokines expressed. NULL, number columns automatically determined. Default NULL.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/plot_compass.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot COMPASS output — plot_compass","text":"list, element ggplot2 object.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/plot_compass.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot COMPASS output — plot_compass","text":"","code":"library(UtilsCompassSV) data(\"c_obj_list\", package = \"UtilsCompassSV\") plot_compass(   c_obj = c_obj_list,   type = c(\"pp\", \"scores\"),   return_plot_list = FALSE,   shift_plot_scores = c(-0.05, 0.05),   shift_plot_pp_y = -0.075,   shift_plot_heatmap_x = 0.052 ) # The plot will then be saved to the working directory.  # Can also use Greek symbols for cytokines: get_cyt_lab <- function(cyt) {   lapply(cyt, function(cyt_ind) {     switch(cyt_ind,       \"IFNg\" = bquote(\"IFN\" ~ gamma),       cyt_ind     )   }) } plot_compass(c_obj_list[1],   type = c(\"pp\"),   return = FALSE, shift_plot_scores = c(-0.05, 0.05), facet = FALSE,   shift_plot_pp_y = -0.05, shift_plot_heatmap_x = 0.052,   cyt_lab = get_cyt_lab )"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/response_prob.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate COMPASS-derived overall responder probability — response_prob","title":"Calculate COMPASS-derived overall responder probability — response_prob","text":"Calculate probability responding least one cytokine combination, assuming independence probability estimates cytokine combinations.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/response_prob.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate COMPASS-derived overall responder probability — response_prob","text":"","code":"response_prob(c_obj, exc = NULL)"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/response_prob.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate COMPASS-derived overall responder probability — response_prob","text":"c_obj object class 'COMPASSResult'. posterior probabilities individual cytokine combinations obtained . exc character vector. Specifies cytokine combination(s) exclude. NULL, none except -negative population excluded. Default NULL.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/response_prob.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate COMPASS-derived overall responder probability — response_prob","text":"dataframe columns sampleid prob.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/response_prob.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate COMPASS-derived overall responder probability — response_prob","text":"Calculates probability individual responding least one cytokine combination (1-product((1-prob_i))), prob_i probability responding -th cytokine combination product taken cytokine combinations except -negative cytokine combination.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/response_prob.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate COMPASS-derived overall responder probability — response_prob","text":"","code":"data(\"c_obj\", package = \"UtilsCompassSV\") response_prob(c_obj = c_obj) #> # A tibble: 148 × 2 #>    sampleid     prob #>    <chr>       <dbl> #>  1 010673_D0   1     #>  2 010782_D0   1     #>  3 010782_D720 1     #>  4 010978_D0   1     #>  5 010993_D0   1     #>  6 020185_D0   1     #>  7 030442_D0   1     #>  8 030448_D0   1     #>  9 030545_D0   1     #> 10 030697_D0   0.521 #> # ℹ 138 more rows response_prob(   c_obj = c_obj,   exc = c(     \"IFNg&IL2&TNF&!IL17&!IL6&!IL22\",     \"IFNg&!IL2&TNF&!IL17&!IL6&!IL22\"   ) ) #> # A tibble: 148 × 2 #>    sampleid     prob #>    <chr>       <dbl> #>  1 010673_D0   1     #>  2 010782_D0   0.992 #>  3 010782_D720 0.996 #>  4 010978_D0   1     #>  5 010993_D0   1     #>  6 020185_D0   0.998 #>  7 030442_D0   1     #>  8 030448_D0   1     #>  9 030545_D0   0.897 #> 10 030697_D0   0.521 #> # ℹ 138 more rows"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/save_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Save an individual layout — .save_plot","title":"Save an individual layout — .save_plot","text":"Save individual plot layout.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/save_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save an individual layout — .save_plot","text":"","code":".save_plot(p, height, width, dir_save, file, save_format, n_row, n_col)"},{"path":"https://satvilab.github.io/UtilsCompassSV/reference/save_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save an individual layout — .save_plot","text":"p object class gg. Plot save. height numeric. Height saved plot centimeters. width numeric. Width saved plot centimeters. dir_save character. save output. Default working directory. file character. File name saved plot. save_format \"pdf\" \"png\". Plot device use. Default \"png\". n_row, n_col integer. Number objects plotted per row column. Determines width height NULL.","code":""},{"path":"https://satvilab.github.io/UtilsCompassSV/news/index.html","id":"utilscompasssv-017","dir":"Changelog","previous_headings":"","what":"UtilsCompassSV 0.1.7","title":"UtilsCompassSV 0.1.7","text":"Added ability specify cytokine heat map colours, using tile_fill parameter.","code":""}]
