<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Utility Functions to Plot and Work with COMPASS Output • UtilsCompassSV</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Utility Functions to Plot and Work with COMPASS Output">
<meta name="description" content="Primary function thus far is plot_compass, which plots posterior probabilities for each cytokine combination using more concise alternatives to the COMPASS::plot function's grid. Also has `convert_cyt_combn_format`, for converting between &quot;standard&quot; and COMPASS cytokine combination formats.">
<meta property="og:description" content="Primary function thus far is plot_compass, which plots posterior probabilities for each cytokine combination using more concise alternatives to the COMPASS::plot function's grid. Also has `convert_cyt_combn_format`, for converting between &quot;standard&quot; and COMPASS cytokine combination formats.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">UtilsCompassSV</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started with UtilsCompassSV</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="utilscompasssv">UtilsCompassSV<a class="anchor" aria-label="anchor" href="#utilscompasssv"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of UtilsCompassSV is to supply useful plotting and utility functions for working with output from COMPASS.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the latest version of UtilsCompassSV from <a href="https://www.github.com" class="external-link">GitHub</a> with</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"SATVILab/UtilsCompassSV"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level3">
<h3 id="plots">Plots<a class="anchor" aria-label="anchor" href="#plots"></a>
</h3>
<p>Create boxplots of posterior probabilities for individual cytokine combinations, as well as the PFS and FS responses. These are more concise than standard <code>COMPASS</code> heatmaps and automatically force the same cytokine combinations to be present and cytokines in the same order for all “groups” plotted together. Note that the PFS and FS scores plot need not be added.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">UtilsCompassSV</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'c_obj_list'</span>, package <span class="op">=</span> <span class="st">'UtilsCompassSV'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_compass.html">plot_compass</a></span><span class="op">(</span></span>
<span>  c_obj <span class="op">=</span> <span class="va">c_obj_list</span>,</span>
<span>  dir_save <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">'data-raw'</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'pp'</span>, <span class="st">'scores'</span><span class="op">)</span>,</span>
<span>  return_plot_list <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  shift_plot_scores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.05</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  shift_plot_pp_y <span class="op">=</span> <span class="op">-</span><span class="fl">0.075</span>,</span>
<span>  shift_plot_heatmap_x <span class="op">=</span> <span class="fl">0.052</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">include_graphics</a></span><span class="op">(</span><span class="st">'data-raw/compass_boxplots_grid.png'</span><span class="op">)</span></span></code></pre></div>
<p><img src="data-raw/compass_boxplots_grid.png" width="100%"></p>
<p>Colours of boxplots and tiles in the cytokine grid plot can be customized.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_compass.html">plot_compass</a></span><span class="op">(</span></span>
<span>  c_obj <span class="op">=</span> <span class="va">c_obj_list</span>,</span>
<span>  dir_save <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu">here</span><span class="op">(</span><span class="st">'data-raw'</span><span class="op">)</span>,</span>
<span>  file_grid <span class="op">=</span> <span class="st">"compass_boxplots_grid_custom_colours"</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'pp'</span>, <span class="st">'scores'</span><span class="op">)</span>,</span>
<span>  return_plot_list <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  shift_plot_scores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.05</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  shift_plot_pp_y <span class="op">=</span> <span class="op">-</span><span class="fl">0.075</span>,</span>
<span>  shift_plot_heatmap_x <span class="op">=</span> <span class="fl">0.034</span>,</span>
<span>  plot_prob_fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"skyblue"</span>, <span class="st">"forestgreen"</span>, <span class="st">"mediumvioletred"</span>, <span class="st">"darkorange"</span><span class="op">)</span>,</span>
<span>  tile_fill <span class="op">=</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">11</span>, name <span class="op">=</span> <span class="st">"Spectral"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html" class="external-link">include_graphics</a></span><span class="op">(</span><span class="st">'data-raw/compass_boxplots_grid_custom_colours.png'</span><span class="op">)</span></span></code></pre></div>
<p><img src="data-raw/compass_boxplots_grid_custom_colours.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="utilities">Utilities<a class="anchor" aria-label="anchor" href="#utilities"></a>
</h3>
<p>Convert cytokine combination formats between standard “+/-” format and COMPASS “!&amp;” format. Can also label cytokines/markers.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cyt_combn_vec_compass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IFNg&amp;!IL2&amp;TNF&amp;IL6&amp;!IL22"</span>,</span>
<span>                           <span class="st">"IFNg&amp;IL2&amp;TNF&amp;IL6&amp;IL22"</span>,</span>
<span>                           <span class="st">"!IFNg&amp;!IL2&amp;!TNF&amp;!IL6&amp;!IL22"</span><span class="op">)</span></span>
<span><span class="va">cyt_combn_vec_std</span> <span class="op">&lt;-</span> <span class="fu">UtilsCompassSV</span><span class="fu">::</span><span class="fu"><a href="reference/convert_cyt_combn_format.html">convert_cyt_combn_format</a></span><span class="op">(</span><span class="va">cyt_combn_vec_compass</span>,</span>
<span>                                                            to <span class="op">=</span> <span class="st">'std'</span><span class="op">)</span></span>
<span><span class="fu">pander</span><span class="fu">::</span><span class="fu">pandoc.table</span><span class="op">(</span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  `COMPASS format` <span class="op">=</span> <span class="va">cyt_combn_vec_compass</span>,</span>
<span>  `Standard format` <span class="op">=</span> <span class="va">cyt_combn_vec_std</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="center">COMPASS format</th>
<th align="center">Standard format</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">IFNg&amp;!IL2&amp;TNF&amp;IL6&amp;!IL22</td>
<td align="center">IFNg+IL2-TNF+IL6+IL22-</td>
</tr>
<tr class="even">
<td align="center">IFNg&amp;IL2&amp;TNF&amp;IL6&amp;IL22</td>
<td align="center">IFNg+IL2+TNF+IL6+IL22+</td>
</tr>
<tr class="odd">
<td align="center">!IFNg&amp;!IL2&amp;!TNF&amp;!IL6&amp;!IL22</td>
<td align="center">IFNg-IL2-TNF-IL6-IL22-</td>
</tr>
</tbody>
</table>
<p>Calculate the probability of an individual responding to at least one cytokine combination, assuming independence of the probability estimates between cytokine combinations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/response_prob.html">response_prob</a></span><span class="op">(</span>c_obj <span class="op">=</span> <span class="va">c_obj_list</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pander</span><span class="fu">::</span><span class="fu">pandoc.table</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="center">sampleid</th>
<th align="center">prob</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">010673_D0</td>
<td align="center">0.076</td>
</tr>
<tr class="even">
<td align="center">010782_D0</td>
<td align="center">0.4405</td>
</tr>
<tr class="odd">
<td align="center">010782_D720</td>
<td align="center">0.903</td>
</tr>
<tr class="even">
<td align="center">010978_D0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">010993_D0</td>
<td align="center">0.8039</td>
</tr>
<tr class="even">
<td align="center">020185_D0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing UtilsCompassSV</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Miguel Julio Rodo <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/SATVILab/compassutils/actions" class="external-link"><img src="https://github.com/SATVILab/compassutils/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/SATVILab/UtilsCompassSV?branch=master" class="external-link"><img src="https://codecov.io/gh/SATVILab/UtilsCompassSV/branch/master/graph/badge.svg" alt="Codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miguel Julio Rodo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
